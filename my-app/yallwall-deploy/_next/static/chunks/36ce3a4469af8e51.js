(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99164,e=>{"use strict";var t=e.i(43476),s=e.i(37902),a=e.i(71645),l=e.i(18566),i=e.i(46897),r=e.i(75254);let n=(0,r.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var o=e.i(90597),c=e.i(86311);let d=(0,r.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,r.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);(0,r.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),(0,r.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);let x=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var u=e.i(7233),p=e.i(92270),h=e.i(23962),f=e.i(30699),b=e.i(22911),g=e.i(54998),j=e.i(17927);e.i(73134);var y=e.i(39312);let w=(0,r.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),v=(0,r.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),N="#0D1B2A",k="#F5A623",_=[{title:"Welcome to YallWall! ðŸ‘‹",subtitle:"Your hyper-local community",description:"Connect with people in Cenla and Boyce, LA. Share real-time updates, discover local deals, and support your neighbors.",icon:i.MapPin,color:k},{title:"YallPoints Economy ðŸª™",subtitle:"Tip & earn rewards",description:"Get 250 free YallPoints every month. Tip great posts, earn when others tip you, and unlock exclusive local perks!",icon:f.Gift,color:"#22C55E"},{title:"Four Feeds, One Wall ðŸ“±",subtitle:"Live â€¢ Hot â€¢ Alerts â€¢ Deals",description:"Switch between Live updates, Hot trending posts, emergency Alerts, and local Deals from businesses near you.",icon:y.Zap,color:"#3B82F6"},{title:"Good Deeds Matter ðŸ’›",subtitle:"Support your community",description:"Recognize helpful neighbors by tipping their posts. Build karma, climb the leaderboard, and make Cenla better together!",icon:o.Heart,color:"#EC4899"}];function S({isOpen:e,onComplete:s,onSkip:l}){let[i,r]=(0,a.useState)(0),[n,o]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{e?setTimeout(()=>o(!0),50):(o(!1),r(0))},[e]),!e)return null;let c=_[i],d=c.icon,m=i===_.length-1;return(0,t.jsxs)("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:l}),(0,t.jsxs)("div",{className:`relative w-full max-w-md rounded-3xl overflow-hidden transition-all duration-300 ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,style:{backgroundColor:"#FAF8F5"},children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-200",children:(0,t.jsx)("div",{className:"h-full transition-all duration-300",style:{width:`${(i+1)/_.length*100}%`,backgroundColor:k}})}),(0,t.jsx)("button",{onClick:l,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-black/5 transition-colors z-10",children:(0,t.jsx)(x,{className:"w-5 h-5",style:{color:N}})}),(0,t.jsxs)("div",{className:"p-8 pt-10 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-2xl mx-auto mb-6 flex items-center justify-center",style:{backgroundColor:`${c.color}20`},children:(0,t.jsx)(d,{className:"w-10 h-10",style:{color:c.color}})}),(0,t.jsxs)("p",{className:"text-xs font-medium mb-2 uppercase tracking-wider",style:{color:c.color},children:["Step ",i+1," of ",_.length]}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:N},children:c.title}),(0,t.jsx)("p",{className:"text-sm font-medium mb-4",style:{color:k},children:c.subtitle}),(0,t.jsx)("p",{className:"text-sm leading-relaxed mb-8",style:{color:`${N}99`},children:c.description}),(0,t.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:_.map((e,s)=>(0,t.jsx)("div",{className:"w-2 h-2 rounded-full transition-all duration-300",style:{backgroundColor:s===i?c.color:`${N}20`,transform:s===i?"scale(1.2)":"scale(1)"}},s))}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:()=>{m?s():r(i+1)},className:"w-full py-3.5 rounded-xl font-semibold text-white flex items-center justify-center gap-2 transition-all hover:scale-[1.02] active:scale-[0.98]",style:{backgroundColor:k},children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"w-5 h-5"}),"Get Started"]}):(0,t.jsxs)(t.Fragment,{children:["Next",(0,t.jsx)(w,{className:"w-5 h-5"})]})}),!m&&(0,t.jsx)("button",{onClick:l,className:"w-full py-3 rounded-xl font-medium text-sm transition-colors hover:bg-black/5",style:{color:`${N}80`},children:"Skip Tutorial"})]})]}),(0,t.jsx)("div",{className:"h-2 w-full",style:{background:`linear-gradient(90deg, ${k} 0%, ${c.color} 100%)`}})]})]})}let C="#0D1B2A",D="#0A1520",T="#0D1B2A",M="#64748B",A="#64748B",F="#F5A623",P="#FAF8F5";u.Plus;let $=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),l=Math.floor(s/36e5);return a<1?"Just now":a<60?`${a}m ago`:l<24?`${l}h ago`:t.toLocaleDateString()},E=["tornado","storm","warning","emergency","evacuate","flooding","power out","outage","accident","road closed","fire","shooting","missing","amber alert","shelter","flood","hurricane","earthquake","danger","urgent"],Y=["deal","discount","special","sale","off","free","happy hour","open","closed","hours","giveaway","promo","coupon","free","bogo","clearance"],I=[{id:1,user:"Sarah M.",avatar:"SM",message:"Storm warning for east side everyone! Stay safe! ðŸŒªï¸",time:"2m ago",likes:12,tips:3,location:"Boyce, LA",isHot:!0,category:"alerts",replies:[{user:"Mike T.",message:"Thanks for the heads up!",time:"1m ago"},{user:"Jessica K.",message:"Staying inside! ðŸ ",time:"30s ago"},{user:"Tom W.",message:"Which part of east side?",time:"45s ago"}]},{id:2,user:"Mike T.",avatar:"MT",message:"Best tacos I've ever had at Maria's on 6th Street right now! The line is long but worth it ðŸŒ®",time:"5m ago",likes:8,tips:5,category:"live",replies:[]},{id:3,user:"Jessica K.",avatar:"JK",message:"Lost my brown lab near Lamar & 6th, answers to Max! Call (512) 555-0123",time:"12m ago",likes:24,tips:8,isImportant:!0,category:"alerts",replies:[{user:"Tom W.",message:"What area specifically?",time:"5m ago"},{user:"Lisa P.",message:"I saw a brown dog near the park!",time:"2m ago"}]},{id:4,user:"Maria's Cantina",avatar:"MC",isBusiness:!0,category:"deals",message:"ðŸŽ‰ GIVEAWAY: First person to name our signature salsa wins dinner for 2! Comment below ðŸ‘‡",time:"Sponsored",likes:45,tips:12,replies:[{user:"David R.",message:"Spicy Verde!",time:"2m ago"},{user:"Lisa P.",message:"Mango Habanero?",time:"1m ago"},{user:"John D.",message:"Chipotle Lime?",time:"30s ago"}]},{id:5,user:"David R.",avatar:"DR",category:"alerts",message:"Traffic is backed up on I-35 Northbound from Riverside to MLK. Accident cleared but delays remain.",time:"15m ago",likes:15,tips:2,replies:[]},{id:6,user:"Lisa P.",avatar:"LP",category:"deals",message:"Farmers market at Republic Square is open until 2pm! Fresh strawberries and homemade bread ðŸ“ðŸ¥–",time:"18m ago",likes:6,tips:1,replies:[]}],L=[{id:"live",label:"Live",icon:"",isLive:!0},{id:"hot",label:"Hot",icon:"ðŸ”¥"},{id:"alerts",label:"Alerts",icon:"ðŸš¨"},{id:"deals",label:"Local Deals",icon:"ðŸª"}];function R({show:e,onComplete:s}){return((0,a.useEffect)(()=>{if(e){let e=setTimeout(s,1e3);return()=>clearTimeout(e)}},[e,s]),e)?(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-20",children:[[...Array(6)].map((e,s)=>(0,t.jsx)("span",{className:"absolute text-2xl animate-tip-coin",style:{animationDelay:`${.1*s}s`,transform:`rotate(${60*s}deg) translateY(-30px)`},children:"ðŸª™"},s)),(0,t.jsx)("div",{className:"absolute w-20 h-20 rounded-full bg-amber-400/30 animate-ripple"})]}):null}function B({message:e,isVisible:s,onClose:l}){return((0,a.useEffect)(()=>{if(s){let e=setTimeout(l,2500);return()=>clearTimeout(e)}},[s,l]),s)?(0,t.jsx)("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[100] animate-toast-slide",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(37, 99, 235, 0.9) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"9999px",padding:"12px 24px",boxShadow:"0 10px 40px -10px rgba(59, 130, 246, 0.5), 0 0 0 1px rgba(255,255,255,0.1) inset"},children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-white font-medium text-sm",children:e})]})}):null}function q({isOpen:e,onClose:s,user:l,onSignOut:i,router:r}){let[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(e);(0,a.useEffect)(()=>{if(e)o(!1),d(!0);else{o(!0);let e=setTimeout(()=>{d(!1)},300);return()=>clearTimeout(e)}},[e]);let m=()=>{o(!0),setTimeout(()=>{s()},300)};if(!c)return null;let u=e=>{m(),setTimeout(()=>{window.location.href=e},350)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`fixed inset-0 bg-black/40 z-50 backdrop-blur-sm transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,onClick:m}),(0,t.jsx)("div",{className:`fixed top-0 left-0 bottom-0 w-[300px] z-50 transition-transform duration-300 ease-out ${n?"-translate-x-full":"translate-x-0"}`,style:{background:"linear-gradient(180deg, rgba(13,27,42,0.98) 0%, rgba(10,21,32,0.98) 100%)",backdropFilter:"blur(20px)"},children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("button",{onClick:m,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 transition-colors",children:(0,t.jsx)(x,{className:"w-5 h-5 text-white/60"})}),(0,t.jsx)("div",{className:"flex justify-center mt-4 mb-6",children:(0,t.jsx)("img",{src:"../images/logo.png",alt:"YallWall",className:"w-12 h-12 object-contain"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-xl font-bold text-white notification-ring",style:{backgroundColor:A},children:l?.display_name?.[0]||l?.username?.[0]||"U"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-white text-lg",children:l?.display_name||l?.username||"User"}),(0,t.jsxs)("p",{className:"text-white/50 text-sm",children:[l?.city||"Cenla",", ",l?.state||"LA"]})]})]}),(0,t.jsx)("div",{className:"mb-6 p-4 rounded-2xl",style:{backgroundColor:"rgba(245,166,35,0.1)",border:"1px solid rgba(245,166,35,0.2)"},children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"cursor-pointer",onClick:()=>u("/profile/wallet"),children:[(0,t.jsx)("p",{className:"text-white/50 text-xs",children:"Your Balance"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",style:{color:F},children:[l?.yallpoints||250," ðŸª™"]})]}),(0,t.jsxs)("button",{onClick:()=>u("/profile/qr"),className:"flex flex-col items-center gap-1 px-3 py-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[(0,t.jsx)(h.QrCode,{className:"w-5 h-5 text-white/60"}),(0,t.jsx)("span",{className:"text-[10px] text-white/40",children:"My QR"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[(0,t.jsx)("div",{className:"font-bold text-lg",style:{color:F},children:l?.tips_given||0}),(0,t.jsx)("div",{className:"text-white/40 text-xs",children:"Tips Given"})]}),(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[(0,t.jsx)("div",{className:"font-bold text-lg",style:{color:F},children:l?.tips_received||0}),(0,t.jsx)("div",{className:"text-white/40 text-xs",children:"Tips Received"})]}),(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-white/5",children:[(0,t.jsx)("div",{className:"font-bold text-lg",style:{color:F},children:"0"}),(0,t.jsx)("div",{className:"text-white/40 text-xs",children:"Posts"})]})]}),(0,t.jsx)("div",{className:"space-y-1",children:[{label:"ðŸ’° YallPoints Wallet",path:"/profile/wallet"},{label:"ðŸ‘¤ Edit Profile",path:"/profile/edit"},{label:"ðŸ“ My Posts",path:"/profile/posts"},{label:"ðŸ’› Good Deeds",path:"/profile/good-deeds"},{label:"ðŸª Business Portal",path:"/profile/business"},{label:"ðŸ”– Saved Items",path:"/profile/saved"},{label:"âš™ï¸ Settings",path:"/profile/settings"},{label:"â“ Help & Support",path:"/profile/help"}].map(e=>(0,t.jsx)("button",{onClick:()=>u(e.path),className:"w-full text-left px-4 py-3.5 rounded-xl text-white/80 hover:bg-white/10 hover:text-white transition-all text-sm font-medium active:scale-[0.98]",children:e.label},e.label))}),(0,t.jsx)("div",{className:"absolute bottom-8 left-6 right-6 space-y-2",children:(0,t.jsxs)("button",{onClick:i,className:"w-full py-3.5 rounded-xl text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-all text-sm font-medium border border-red-500/20 active:scale-[0.98] flex items-center justify-center gap-2",children:[(0,t.jsx)(p.LogOut,{className:"w-4 h-4"}),"Sign Out"]})})]})})]})}function z({message:e,isOpen:s,onClose:l,onReply:i,currentUser:r,supabase:n}){let[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[h,f]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1),j=(0,a.useRef)(null),y=(0,a.useRef)(null);return((0,a.useEffect)(()=>{s&&e&&n&&(async()=>{g(!0);let{data:t,error:s}=await n.from("replies").select("*").eq("message_id",e.id).order("created_at",{ascending:!0});if(t&&!s){let e=[...new Set(t.map(e=>e.user_id))],{data:s}=await n.from("profiles").select("id, username, display_name, avatar_url").in("id",e),a=new Map;s?.forEach(e=>a.set(e.id,e)),f(t.map(e=>{let t=a.get(e.user_id);return{id:e.id,user_id:e.user_id,user:t?.display_name||t?.username||"Anonymous",avatar:(t?.display_name||t?.username||"U").substring(0,2).toUpperCase(),message:e.content,time:$(e.created_at)}}))}g(!1)})()},[s,e,n]),(0,a.useEffect)(()=>{s?(requestAnimationFrame(()=>p(!0)),m(!1),c("")):(p(!1),f([]))},[s]),(0,a.useEffect)(()=>{d&&j.current&&setTimeout(()=>j.current?.focus(),100)},[d]),s&&e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:l,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-all duration-300",style:{opacity:+!!u}}),(0,t.jsxs)("div",{className:"relative w-full max-w-md flex flex-col transition-all duration-300",style:{maxHeight:"85vh",background:"rgba(13, 27, 42, 0.95)",backdropFilter:"blur(30px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"24px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",opacity:+!!u,transform:u?"scale(1) translateY(0)":"scale(0.9) translateY(20px)",transitionTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-white/10 shrink-0",children:[(0,t.jsx)("h3",{className:"font-bold text-white text-lg",children:"Thread"}),(0,t.jsx)("button",{onClick:l,className:"p-2.5 hover:bg-white/10 rounded-full transition-colors active:scale-90",children:(0,t.jsx)(x,{className:"w-5 h-5 text-white/60"})})]}),(0,t.jsxs)("div",{ref:y,className:"flex-1 overflow-y-auto no-scrollbar",style:{paddingBottom:d?"0":"20px"},children:[(0,t.jsxs)("div",{className:"p-5 border-b border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.2)"},children:e.avatar}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-white",children:e.user}),(0,t.jsx)("div",{className:"text-xs text-white/40",children:e.time})]})]}),(0,t.jsx)("p",{className:"text-white/90 text-[15px] leading-relaxed pl-[52px]",children:e.message})]}),(0,t.jsx)("div",{className:"p-5 space-y-4",children:b?(0,t.jsx)("p",{className:"text-center text-white/40 text-sm py-8",children:"Loading replies..."}):0===h.length?(0,t.jsx)("p",{className:"text-center text-white/40 text-sm py-8",children:"No replies yet. Be the first!"}):h.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-3 animate-fade-in group relative",style:{animationDelay:`${50*s}ms`},children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold text-white/80 shrink-0",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:e.avatar}),(0,t.jsxs)("div",{className:"flex-1 pr-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,t.jsx)("span",{className:"font-semibold text-sm text-white",children:e.user}),(0,t.jsx)("span",{className:"text-xs text-white/40",children:e.time})]}),(0,t.jsx)("p",{className:"text-sm text-white/80",children:e.message})]}),r?.id===e.user_id&&(0,t.jsx)("button",{onClick:async()=>{if(!confirm("Delete this reply?"))return;let{error:t}=await n.from("replies").delete().eq("id",e.id);t?alert("Failed to delete reply"):f(h.filter(t=>t.id!==e.id))},className:"absolute top-0 right-0 w-6 h-6 flex items-center justify-center rounded-full text-white/30 hover:text-red-400 transition-all",style:{touchAction:"manipulation"},title:"Delete reply",children:(0,t.jsx)(x,{className:"w-3.5 h-3.5"})})]},e.id||s))}),d&&(0,t.jsx)("div",{className:"h-4"})]}),(0,t.jsx)("div",{className:"border-t border-white/10 bg-white/5 shrink-0",children:d?(0,t.jsxs)("div",{className:"p-4 animate-slide-up-fade",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{ref:j,type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Write a reply...",className:"flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-sm text-white placeholder-white/40 focus:outline-none focus:border-amber-400/50 transition-all",onKeyDown:async t=>{if("Enter"===t.key&&o.trim()){t.preventDefault(),await i(o),c(""),m(!1);let{data:s}=await n.from("replies").select("*").eq("message_id",e.id).order("created_at",{ascending:!0});if(s){let e=[...new Set(s.map(e=>e.user_id))],{data:t}=await n.from("profiles").select("id, username, display_name, avatar_url").in("id",e),a=new Map;t?.forEach(e=>a.set(e.id,e)),f(s.map(e=>{let t=a.get(e.user_id);return{id:e.id,user_id:e.user_id,user:t?.display_name||t?.username||"Anonymous",avatar:(t?.display_name||t?.username||"U").substring(0,2).toUpperCase(),message:e.content,time:$(e.created_at)}}))}}}}),(0,t.jsx)("button",{onClick:async()=>{if(o.trim()){await i(o),c(""),m(!1);let{data:t}=await n.from("replies").select("*").eq("message_id",e.id).order("created_at",{ascending:!0});if(t){let e=[...new Set(t.map(e=>e.user_id))],{data:s}=await n.from("profiles").select("id, username, display_name, avatar_url").in("id",e),a=new Map;s?.forEach(e=>a.set(e.id,e)),f(t.map(e=>{let t=a.get(e.user_id);return{id:e.id,user_id:e.user_id,user:t?.display_name||t?.username||"Anonymous",avatar:(t?.display_name||t?.username||"U").substring(0,2).toUpperCase(),message:e.content,time:$(e.created_at)}}))}}},className:"px-5 py-3 rounded-xl text-white font-semibold text-sm active:scale-95 transition-transform",style:{backgroundColor:A},children:"Reply"})]}),(0,t.jsx)("button",{onClick:()=>m(!1),className:"w-full mt-2 text-xs text-white/40 hover:text-white/60 transition-colors",children:"Cancel"})]}):(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("button",{onClick:()=>m(!0),className:"w-full py-3 rounded-xl text-white font-semibold text-sm transition-all active:scale-[0.98] hover:opacity-90",style:{backgroundColor:A},children:"Reply to this thread"})})})]})]}):null}function O({message:e,onTip:s,onThread:l,onDelete:r,onLike:n,isLiked:d,currentUserId:m}){let[x,u]=(0,a.useState)(!1),p=m&&e.user_id===m,h=()=>{u(!0),s()};return e.isBusiness?(0,t.jsx)("div",{className:"w-full animate-fade-in my-4",style:{animationDelay:`${50*e.id}ms`},children:(0,t.jsx)("div",{className:"p-2 cursor-pointer transition-all duration-200 hover:-translate-y-0.5 relative overflow-hidden",onClick:l,style:{background:"#FAF8F5",borderRadius:"18px",border:"none",boxShadow:`
              0 4px 6px rgba(0, 0, 0, 0.07),
              0 10px 20px rgba(0, 0, 0, 0.12),
              0 20px 40px rgba(0, 0, 0, 0.08),
              inset 0 0 0 2px ${A}30
            `},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center text-base font-bold text-white shrink-0",style:{backgroundColor:A},children:e.avatar}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,t.jsx)("span",{className:"font-bold",style:{color:T},children:e.user}),(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-medium border",style:{color:A,backgroundColor:`${A}15`,borderColor:`${A}30`},children:"Sponsored"})]}),(0,t.jsx)("p",{className:"text-sm leading-relaxed mb-3",style:{color:T},children:e.message}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),h()},className:"relative flex items-center gap-1.5 transition-colors",style:{color:A},children:[(0,t.jsx)(R,{show:x,onComplete:()=>u(!1)}),(0,t.jsx)("span",{className:"text-lg",children:"ðŸª™"}),(0,t.jsx)("span",{className:"font-semibold text-sm",children:e.tips}),(0,t.jsx)("span",{className:"text-xs",style:{color:M},children:"tips"})]}),(0,t.jsx)("span",{style:{color:M},children:"|"}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),l()},className:"flex items-center gap-1 text-xs transition-colors",style:{color:M},children:[(0,t.jsx)(c.MessageSquare,{className:"w-3.5 h-3.5"}),e.replyCount||0," replies"]}),p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{color:M},children:"|"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),r?.()},className:"text-xs hover:text-red-400 transition-colors",style:{color:M},children:"Delete"})]})]})]})]})})}):(0,t.jsx)("div",{className:"w-full animate-fade-in my-2 relative",style:{animationDelay:`${50*e.id}ms`},children:(0,t.jsxs)("div",{className:"relative p-2 cursor-pointer transition-all duration-200 hover:-translate-y-0.5 group",style:{background:"#FAF8F5",borderRadius:"18px",border:"none",boxShadow:`
            0 4px 6px rgba(0, 0, 0, 0.07),
            0 10px 20px rgba(0, 0, 0, 0.12),
            0 20px 40px rgba(0, 0, 0, 0.08)
          `},onClick:l,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 mb-2",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold text-white shrink-0",style:{backgroundColor:A,border:"none"},children:e.avatar}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-semibold text-sm truncate",style:{color:T},children:e.user}),"alerts"===e.category&&(0,t.jsx)("span",{className:"text-[10px] bg-red-500/10 text-red-500 px-1.5 py-0.5 rounded-full font-bold flex items-center gap-0.5 border border-red-500/20",children:"ðŸš¨ Alert"}),"deals"===e.category&&(0,t.jsx)("span",{className:"text-[10px] bg-green-500/10 text-green-600 px-1.5 py-0.5 rounded-full font-bold flex items-center gap-0.5 border border-green-500/20",children:"ðŸª Deal"}),(e.tips>0||e.likes>=5)&&(0,t.jsx)("span",{className:"text-[10px] bg-orange-500/10 text-orange-500 px-1.5 py-0.5 rounded-full font-bold border border-orange-500/20",children:"ðŸ”¥ Hot"})]})}),(0,t.jsx)("span",{className:"text-xs font-medium whitespace-nowrap",style:{color:M},children:e.time})]}),(0,t.jsx)("p",{className:"text-sm leading-relaxed mb-2.5 pl-11.5",style:{color:T},children:e.message}),e.location&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs mb-2 pl-11.5",style:{color:M},children:[(0,t.jsx)(i.MapPin,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.location})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pl-11.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),h()},className:"relative flex items-center gap-1 transition-colors",style:{color:A},children:[(0,t.jsx)(R,{show:x,onComplete:()=>u(!1)}),(0,t.jsx)("span",{className:"text-base",children:"ðŸª™"}),(0,t.jsx)("span",{className:"font-semibold text-xs",children:e.tips||"Tip"})]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),n?.()},className:`flex items-center gap-1 transition-colors text-xs ${d?"text-red-500":""}`,style:d?void 0:{color:M},disabled:!n,children:[(0,t.jsx)(o.Heart,{className:`w-3.5 h-3.5 ${d?"fill-red-500":""}`}),(0,t.jsx)("span",{children:e.likes})]}),(e.replyCount||0)>0&&(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),l()},className:"flex items-center gap-1 text-xs transition-colors",style:{color:M},children:[(0,t.jsx)(c.MessageSquare,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:e.replyCount})]})]}),p?(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),confirm("Delete this post?")&&r?.()},className:"text-[10px] hover:text-red-400 transition-colors",style:{color:M},children:"Delete"}):(0,t.jsx)("span",{className:"text-[10px]",style:{color:M},children:"23h left"})]})]})})}function W(){let e,r=(0,l.useRouter)(),o=(0,j.createClientClient)(),[c,x]=(0,a.useState)("live"),[u,p]=(0,a.useState)("feed"),[h,y]=(0,a.useState)(!1),[w,v]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),[_,T]=(0,a.useState)(""),[M,R]=(0,a.useState)(!1),[W,U]=(0,a.useState)(3),[H,G]=(0,a.useState)(!1),[K,J]=(0,a.useState)(null),[Q,V]=(0,a.useState)(!1),[Z,X]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(!1),es=(0,a.useRef)(null),[ea,el]=(0,a.useState)([]),[ei,er]=(0,a.useState)(!0),[en,eo]=(0,a.useState)(new Set),ec=(0,a.useRef)(new Set),[ed,em]=(0,a.useState)(null),[ex,eu]=(0,a.useState)(250),[ep,eh]=(0,a.useState)(!1),[ef,eb]=(0,a.useState)(1),[eg,ej]=(0,a.useState)(null),[ey,ew]=(0,a.useState)(null),[ev,eN]=(0,a.useState)(!1),[ek,e_]=(0,a.useState)(""),[eS,eC]=(0,a.useState)([]),[eD,eT]=(0,a.useState)(!1),[eM,eA]=(0,a.useState)(!1),[eF,eP]=(0,a.useState)(0),[e$,eE]=(0,a.useState)(0),[eY,eI]=(0,a.useState)(0),[eL,eR]=(0,a.useState)({message:"",visible:!1}),eB=e=>{eR({message:e,visible:!0})};(0,a.useEffect)(()=>{y(!0);let e=async(e=3)=>{for(let t=0;t<e;t++)try{let e=new Promise((e,t)=>setTimeout(()=>t(Error("Auth check timeout")),3e3)),t=o.auth.getSession(),{data:{session:s}}=await Promise.race([t,e]);if(console.log("Auth check - Session:",s?.user?.email),s){V(!0);let{data:e,error:t}=await o.from("profiles").select("*").eq("id",s.user.id).maybeSingle();if(t&&console.error("Error fetching profile:",t),e){console.log("Profile loaded:",e.username),J(e);let t=new Date(e.created_at),s=new Date(Date.now()-36e5),a=localStorage.getItem("yallwall_onboarding_complete");t>s&&!a&&et(!0)}else console.log("No profile found for user, creating basic one..."),J({id:s.user.id,username:s.user.email?.split("@")[0]||"user",display_name:s.user.user_metadata?.name||s.user.email?.split("@")[0]||"User",avatar_url:s.user.user_metadata?.avatar_url||null,city:"Cenla",state:"LA",lat:null,lng:null,tips_given:0,tips_received:0,yallpoints:250,yallpoints_earned:0,last_points_reset:new Date().toISOString(),account_type:"regular",business_name:null,is_verified:!1,qr_code_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),et(!0);let{data:a}=await o.from("user_likes").select("message_id").eq("user_id",s.user.id);a&&eo(new Set(a.map(e=>e.message_id)))}else V(!1),J(null);return}catch(s){console.error(`Auth check failed (attempt ${t+1}/${e}):`,s),t===e-1?(V(!1),J(null)):await new Promise(e=>setTimeout(e,500))}};setTimeout(()=>e(),100);let{data:{subscription:t}}=o.auth.onAuthStateChange(async(e,t)=>{if(console.log("Auth event:",e,t?.user?.email),"SIGNED_IN"===e&&t){V(!0);let{data:e,error:s}=await o.from("profiles").select("*").eq("id",t.user.id).maybeSingle();s&&console.error("Error fetching profile on sign in:",s),e?J(e):J({id:t.user.id,username:t.user.email?.split("@")[0]||"user",display_name:t.user.user_metadata?.name||t.user.email?.split("@")[0]||"User",avatar_url:t.user.user_metadata?.avatar_url||null,city:"Cenla",state:"LA",lat:null,lng:null,tips_given:0,tips_received:0,yallpoints:250,yallpoints_earned:0,last_points_reset:new Date().toISOString(),account_type:"regular",business_name:null,is_verified:!1,qr_code_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});let{data:a}=await o.from("user_likes").select("message_id").eq("user_id",t.user.id);a&&eo(new Set(a.map(e=>e.message_id)))}else"SIGNED_OUT"===e&&(V(!1),J(null))});return()=>{t.unsubscribe()}},[]);let eq=async()=>{if(w){let{count:e}=await o.from("replies").select("*",{count:"exact",head:!0}).eq("message_id",w.id);el(t=>t.map(t=>t.id===w.id?{...t,replyCount:e||0}:t))}v(null)},ez=async e=>{if(console.log("handleReply called with:",e),console.log("selectedThread:",w?.id),console.log("isAuthenticated:",Q),console.log("user?.id:",K?.id),!w||!Q||!K?.id)return void alert("Please sign in to reply");console.log("Inserting reply...");let{data:t,error:s}=await o.from("replies").insert({message_id:w.id,user_id:K.id,content:e}).select();console.log("Insert result:",{data:t,error:s}),s?(console.error("Error creating reply:",s),alert("Failed to post reply: "+s.message)):(console.log("Reply created successfully:",t),eB("Reply sent!"))},eO=async e=>{if(!confirm("Delete this post?"))return;let{error:t}=await o.from("messages").delete().eq("id",e);t?(console.error("Error deleting message:",t),alert("Failed to delete post")):el(ea.filter(t=>t.id!==e))},eW=async e=>{if(!Q||!K?.id)return void alert("Please sign in to like posts");if(ec.current.has(e))return;ec.current.add(e);let t=ea.find(t=>t.id===e);if(!t)return void ec.current.delete(e);let s=en.has(e);s?(eo(t=>{let s=new Set(t);return s.delete(e),s}),el(t=>t.map(t=>t.id===e?{...t,likes:Math.max(0,t.likes-1)}:t))):(eo(t=>new Set(t).add(e)),el(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t)));try{s?(await o.from("user_likes").delete().eq("user_id",K.id).eq("message_id",e),await o.from("messages").update({likes:Math.max(0,(t.likes||0)-1)}).eq("id",e)):(await o.from("user_likes").insert({user_id:K.id,message_id:e}),await o.from("messages").update({likes:(t.likes||0)+1}).eq("id",e))}catch(t){console.error("Error toggling like:",t),s?(eo(t=>new Set(t).add(e)),el(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t))):(eo(t=>{let s=new Set(t);return s.delete(e),s}),el(t=>t.map(t=>t.id===e?{...t,likes:Math.max(0,t.likes-1)}:t)))}finally{setTimeout(()=>{ec.current.delete(e)},500)}},eU=async()=>{await o.auth.signOut(),R(!1),J(null),V(!1)};(0,a.useEffect)(()=>{let e=async(e=3)=>{er(!0);let{data:{session:t}}=await o.auth.getSession(),s=!!t;for(let t=0;t<e;t++)try{let e=new Promise((e,t)=>setTimeout(()=>t(Error("Messages fetch timeout")),1e4)),t=o.from("messages").select("*").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(50),{data:a,error:l}=await Promise.race([t,e]);if(l)console.error("Error fetching messages:",l),s?el([]):el(I);else if(a&&a.length>0){let e=[...new Set(a.map(e=>e.user_id))],t=a.map(e=>e.id),{data:s}=await o.from("profiles").select("id, username, display_name, avatar_url").in("id",e),l=new Map;s?.forEach(e=>l.set(e.id,e));let{data:i}=await o.from("replies").select("message_id").in("message_id",t),r=new Map;i?.forEach(e=>{r.set(e.message_id,(r.get(e.message_id)||0)+1)});let n=a.map(e=>{let t=l.get(e.user_id);return{id:e.id,user_id:e.user_id,user:t?.display_name||t?.username||"Anonymous",avatar:(t?.display_name||t?.username||"U").substring(0,2).toUpperCase(),message:e.content,time:$(e.created_at),likes:e.likes||0,tips:e.tips||0,location:e.location_name,isHot:e.is_hot,isImportant:e.is_important,isBusiness:e.is_business,replies:[],replyCount:r.get(e.id)||0}});el(n)}else s?el([]):el(I);er(!1);return}catch(a){console.error(`Fetch error (attempt ${t+1}/${e}):`,a),t===e-1?(s?el([]):el(I),er(!1)):await new Promise(e=>setTimeout(e,300))}};h&&setTimeout(()=>e(),200);let t=o.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},()=>{e()}).subscribe();return()=>{t.unsubscribe()}},[h]);let eH=async()=>{var e,t;let s;if(!_.trim())return;if(!Q)return void r.push("/login");if(!K?.id){console.error("No user ID available"),alert("Please sign in again");return}X(!0);let a=(e=ed||void 0,t=K?.account_type==="business",s=_.toLowerCase(),"alert"===e||E.some(e=>s.includes(e))?"alerts":"business"===e||t||Y.some(e=>s.includes(e))?"deals":"live"),{data:l,error:i}=await o.from("messages").insert({user_id:K.id,content:_,location_name:K?.city||"Boyce, LA",category:a,is_alert:"alerts"===a,is_business_post:"deals"===a,manual_flag:ed,expires_at:new Date(Date.now()+864e5).toISOString()}).select();i?(console.error("Error creating message:",i),alert("Failed to post: "+i.message)):(console.log("Message created:",l),T(""),em(null),G(!1),eB(`Posted to ${a}!`)),X(!1)},eG=async(e,t,s,a)=>{if(!K?.id||ex<e)return void eB("Not enough YallPoints!");try{await o.from("tips").insert({from_user_id:K.id,to_user_id:t,message_id:s||null,amount:e,reason:a||null,is_profile_tip:!s}),await o.from("profiles").update({yallpoints:ex-e}).eq("id",K.id),await o.rpc("increment_earned_points",{user_id:t,amount:e}),eu(t=>t-e),eB(`Tipped ${e} YallPoints! ðŸ’°`),eh(!1),ej(null),ew(null)}catch(e){console.error("Tip failed:",e),eB("Failed to send tip")}};if(!h)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:C},children:(0,t.jsx)("div",{className:"text-white/40 text-sm",children:"Loading..."})});let eK=!!w||M;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}),(0,t.jsx)(B,{message:eL.message,isVisible:eL.visible,onClose:()=>{eR({message:"",visible:!1})}}),(0,t.jsxs)("div",{style:{fontFamily:"var(--font-inter), Inter, sans-serif",backgroundColor:C,touchAction:"pan-y"},className:`jsx-c5f2467d0a34ab96 min-h-screen flex flex-col ${b.default.variable} ${g.default.variable} overflow-x-hidden`,children:[(0,t.jsx)(s.default,{id:"c5f2467d0a34ab96",children:"@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{opacity:0;animation:.3s ease-out forwards fadeIn}@keyframes slide-in-left{0%{transform:translate(-100%)}to{transform:translate(0)}}.animate-slide-in-left{animation:.3s cubic-bezier(.16,1,.3,1) forwards slide-in-left}@keyframes tip-coin{0%{opacity:0;transform:scale(0)rotate(0)}50%{opacity:1;transform:scale(1.2)rotate(180deg)}to{opacity:0;transform:scale(1)rotate(360deg)translateY(-50px)}}.animate-tip-coin{animation:.8s ease-out forwards tip-coin}@keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(2)}}.animate-ripple{animation:.6s ease-out forwards ripple}@keyframes pulse-glow{0%,to{opacity:1;box-shadow:0 0 #22c55e66}50%{opacity:.8;box-shadow:0 0 0 6px #22c55e00}}.live-pulse{animation:2s infinite pulse-glow}@keyframes slide-up-fade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-slide-up-fade{animation:.25s cubic-bezier(.16,1,.3,1) forwards slide-up-fade}@keyframes nav-slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-nav-slide-up{animation:.4s cubic-bezier(.16,1,.3,1) forwards nav-slide-up}@keyframes toast-slide{0%{opacity:0;transform:translate(-50%)translateY(-20px)scale(.95)}to{opacity:1;transform:translate(-50%)translateY(0)scale(1)}}.animate-toast-slide{animation:.3s cubic-bezier(.16,1,.3,1) forwards toast-slide}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.no-select{-webkit-user-select:none;user-select:none}"}),(0,t.jsx)(q,{isOpen:M,onClose:()=>R(!1),user:K,onSignOut:eU,router:r}),(0,t.jsx)(S,{isOpen:ee,onComplete:()=>{localStorage.setItem("yallwall_onboarding_complete","true"),et(!1)},onSkip:()=>{localStorage.setItem("yallwall_onboarding_complete","true"),et(!1)}}),(0,t.jsx)(z,{message:w,isOpen:!!w,onClose:eq,onReply:ez,currentUser:K,supabase:o}),(0,t.jsx)("header",{style:{transform:eK?"translateY(-100%)":"translateY(0)",opacity:+!eK,transition:"transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.2s ease"},className:"jsx-c5f2467d0a34ab96 glass-header sticky top-0 z-40 shrink-0 no-select",children:(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 max-w-2xl mx-auto px-4 h-14 flex items-center relative",children:[(0,t.jsxs)("button",{onClick:()=>K?R(!0):r.push("/login"),className:"jsx-c5f2467d0a34ab96 absolute left-4 active:scale-95 transition-transform",children:[(0,t.jsx)("div",{style:{backgroundColor:A},className:`jsx-c5f2467d0a34ab96 w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold text-white transition-all ${W>0?"notification-ring":""}`,children:K?.display_name?.[0]||K?.username?.[0]||"?"}),W>0&&(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-[10px] font-bold text-white",children:W})]}),(0,t.jsx)("div",{style:{right:"calc(50% + 40px)"},className:"jsx-c5f2467d0a34ab96 absolute",children:(0,t.jsxs)("span",{style:{fontFamily:"var(--font-jakarta)"},className:"jsx-c5f2467d0a34ab96 font-bold text-xl tracking-tight whitespace-nowrap",children:[(0,t.jsx)("span",{className:"jsx-c5f2467d0a34ab96 text-white",children:"Yall"}),(0,t.jsx)("span",{style:{color:F},className:"jsx-c5f2467d0a34ab96",children:"Wall"})]})}),(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 absolute left-1/2 -translate-x-1/2",children:(0,t.jsx)("img",{src:"./images/logo.png",alt:"YallWall",className:"jsx-c5f2467d0a34ab96 w-12 h-12 object-contain"})}),(0,t.jsx)("div",{style:{left:"calc(50% + 40px)"},className:"jsx-c5f2467d0a34ab96 absolute",children:(0,t.jsx)("h1",{style:{fontFamily:"var(--font-jakarta)"},className:"jsx-c5f2467d0a34ab96 text-white font-bold text-xl tracking-tight whitespace-nowrap",children:"Cenla"})}),(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 absolute right-4",children:(0,t.jsxs)("button",{className:"jsx-c5f2467d0a34ab96 p-2 rounded-full hover:bg-white/10 transition-colors relative active:scale-90",children:[(0,t.jsx)(m,{className:"w-5 h-5 text-white/80"}),W>0&&(0,t.jsx)("div",{style:{backgroundColor:A},className:"jsx-c5f2467d0a34ab96 absolute top-1.5 right-1.5 w-2 h-2 rounded-full"})]})})]})}),(0,t.jsx)("div",{style:{transform:eK?"translateY(-20px)":"translateY(0)",opacity:+!eK,transition:"transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.2s ease",pointerEvents:eK?"none":"auto"},className:"jsx-c5f2467d0a34ab96 sticky top-14 z-30 py-3 px-4 shrink-0",children:(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 max-w-xl mx-auto",children:[(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 flex justify-center",children:(0,t.jsx)("div",{style:{border:"1px solid rgba(255,255,255,0.1)"},className:"jsx-c5f2467d0a34ab96 inline-flex p-1 rounded-2xl bg-white/5 backdrop-blur-sm",children:L.map(e=>{let s=c===e.id;return(0,t.jsxs)("button",{onClick:()=>x(e.id),style:{backgroundColor:s?A:void 0,boxShadow:s?`0 2px 12px ${A}66`:"none"},className:`jsx-c5f2467d0a34ab96 flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap transition-all active:scale-95 ${s?"text-white shadow-lg":"text-white/50 hover:text-white/80 hover:bg-white/5"}`,children:[e.isLive&&(0,t.jsx)("span",{className:"jsx-c5f2467d0a34ab96 w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"jsx-c5f2467d0a34ab96",children:e.icon}),(0,t.jsx)("span",{className:"jsx-c5f2467d0a34ab96",children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 flex items-center justify-center gap-1.5 mt-2",children:[(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 w-1.5 h-1.5 bg-green-400 rounded-full live-pulse"}),(0,t.jsx)("span",{className:"jsx-c5f2467d0a34ab96 text-xs text-white/60",children:"333 Neighbors Online"})]})]})}),(0,t.jsx)("main",{style:{paddingBottom:H?"140px":"80px"},className:"jsx-c5f2467d0a34ab96 flex-1 overflow-y-auto no-scrollbar",children:(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 max-w-xl mx-auto px-4 py-2",children:[(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 space-y-1",children:ei?(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 text-center py-12",children:[(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 w-8 h-8 border-2 border-amber-400/30 border-t-amber-400 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-white/40 text-sm",children:"Loading messages..."})]}):0===ea.length?(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 text-center py-12",children:(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-white/40 text-sm",children:"No messages yet. Be the first!"})}):0===(e=ea.filter(e=>{switch(c){case"hot":return(e.tips||0)>0||(e.likes||0)>=5;case"alerts":return"alerts"===e.category||e.isImportant;case"deals":return"deals"===e.category||e.isBusiness;default:return!0}})).length?(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 text-center py-12",children:(0,t.jsxs)("p",{className:"jsx-c5f2467d0a34ab96 text-white/40 text-sm",children:["hot"===c&&"Nothing hot right now. Be the first to tip!","alerts"===c&&"No alerts. All clear! âœ…","deals"===c&&"No local deals right now. Check back later!","live"===c&&"No messages yet. Be the first!"]})}):e.map(e=>(0,t.jsx)(O,{message:e,onTip:()=>{ej({id:e.user_id,username:e.user}),ew(e.id),eh(!0)},onThread:()=>{v(e),G(!1)},onDelete:()=>eO(e.id),onLike:()=>eW(e.id),isLiked:en.has(e.id),currentUserId:K?.id},e.id))}),(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 text-center py-8",children:(0,t.jsx)("button",{className:"jsx-c5f2467d0a34ab96 text-xs text-white/30 hover:text-white/50 transition-colors",children:"Load more messages..."})}),(0,t.jsxs)("div",{style:{backgroundColor:"rgba(245,166,35,0.08)",border:"1px solid rgba(245,166,35,0.2)"},className:"jsx-c5f2467d0a34ab96 mx-4 mb-8 p-6 rounded-2xl",children:[(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 text-center mb-4",children:[(0,t.jsx)("h3",{className:"jsx-c5f2467d0a34ab96 text-white font-semibold text-lg mb-1",children:"Don't Miss the Wall"}),(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-white/50 text-sm",children:"Get the juiciest local drama, events, weather alerts, and free tacos. No spam, just vibes. ðŸŒ®"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),alert("Thanks for signing up! We'll keep you posted.")},className:"jsx-c5f2467d0a34ab96 flex gap-2",children:[(0,t.jsx)("input",{type:"email",placeholder:"your@email.com",required:!0,className:"jsx-c5f2467d0a34ab96 flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-white/30 text-sm focus:outline-none focus:border-amber-400/50"}),(0,t.jsx)("button",{type:"submit",style:{backgroundColor:A},className:"jsx-c5f2467d0a34ab96 px-5 py-3 rounded-xl font-semibold text-sm text-white transition-all active:scale-95 hover:opacity-90",children:"Join"})]}),(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-center text-white/30 text-xs mt-3",children:"We pinky promise not to ghost you... unless you're boring."})]})]})}),(0,t.jsx)("div",{style:{bottom:"76px",opacity:H&&!eK?1:0,transform:H&&!eK?"translateY(0)":"translateY(20px)",transition:"opacity 0.25s ease, transform 0.3s cubic-bezier(0.16, 1, 0.3, 1)",pointerEvents:H&&!eK?"auto":"none"},className:"jsx-c5f2467d0a34ab96 fixed left-4 right-4 z-40",children:(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 max-w-xl mx-auto animate-input-expand",children:[(0,t.jsx)("div",{style:{backgroundColor:D,border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},className:"jsx-c5f2467d0a34ab96 p-1.5 rounded-2xl",children:(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 flex items-center gap-2",children:[(0,t.jsx)("button",{style:{color:P},className:"jsx-c5f2467d0a34ab96 p-2.5 rounded-full hover:bg-white/10 transition-colors active:scale-90",children:(0,t.jsx)(i.MapPin,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 flex-1 relative",children:(0,t.jsx)("input",{ref:es,type:"text",value:_,onChange:e=>T(e.target.value),onFocus:()=>k(!0),onBlur:()=>k(!1),onKeyDown:e=>{"Enter"===e.key&&_.trim()&&!Z&&(e.preventDefault(),eH())},placeholder:N?"What's happening in Cenla?":"Say something nice...",style:{color:P},className:"jsx-c5f2467d0a34ab96 w-full bg-transparent focus:outline-none text-sm py-2.5 px-2 placeholder:text-white/40"})}),N?(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 flex items-center gap-2",children:[(0,t.jsxs)("span",{style:{color:"rgba(250,248,245,0.5)"},className:"jsx-c5f2467d0a34ab96 text-xs",children:[_.length,"/280"]}),(0,t.jsx)("button",{style:{backgroundColor:F},onClick:eH,disabled:Z||!_.trim(),className:"jsx-c5f2467d0a34ab96 p-2.5 rounded-full transition-all hover:scale-105 active:scale-90 disabled:opacity-50",children:(0,t.jsx)(n,{className:"w-4 h-4 text-white"})})]}):(0,t.jsx)("button",{style:{backgroundColor:F},onClick:eH,disabled:Z||!_.trim(),className:"jsx-c5f2467d0a34ab96 p-2.5 rounded-full transition-all hover:scale-105 active:scale-90 disabled:opacity-50",children:(0,t.jsx)(n,{className:"w-4 h-4 text-white"})})]})}),(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 flex gap-2 mt-2 px-1",children:[(0,t.jsxs)("button",{onClick:()=>em("alert"===ed?null:"alert"),className:`jsx-c5f2467d0a34ab96 flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-medium transition-all ${"alert"===ed?"bg-red-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:[(0,t.jsx)(d,{className:"w-3.5 h-3.5"}),"Alert"]}),(0,t.jsxs)("button",{onClick:()=>em("business"===ed?null:"business"),className:`jsx-c5f2467d0a34ab96 flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-medium transition-all ${"business"===ed?"bg-green-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:[(0,t.jsx)(f.Gift,{className:"w-3.5 h-3.5"}),"Business/Deal"]}),ed&&(0,t.jsx)("button",{onClick:()=>em(null),className:"jsx-c5f2467d0a34ab96 text-white/40 text-xs hover:text-white/60 px-2",children:"Clear"})]}),(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-center text-[10px] text-white/30 mt-2",children:"Messages disappear after 24 hours"})]})}),ep&&eg&&(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 fixed inset-0 z-50 flex items-end justify-center pb-24 px-4",children:[(0,t.jsx)("div",{onClick:()=>eh(!1),className:"jsx-c5f2467d0a34ab96 absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,t.jsxs)("div",{style:{backgroundColor:D,border:"1px solid rgba(255,255,255,0.1)"},className:"jsx-c5f2467d0a34ab96 relative w-full max-w-sm p-6 rounded-3xl",children:[(0,t.jsx)("h3",{className:"jsx-c5f2467d0a34ab96 text-white font-semibold text-lg mb-1",children:"Send YallPoints"}),(0,t.jsxs)("p",{className:"jsx-c5f2467d0a34ab96 text-white/50 text-sm mb-4",children:["To @",eg.username]}),(0,t.jsx)("div",{className:"jsx-c5f2467d0a34ab96 grid grid-cols-4 gap-2 mb-4",children:[1,3,5,10].map(e=>(0,t.jsx)("button",{onClick:()=>eb(e),style:{backgroundColor:ef===e?F:void 0},className:`jsx-c5f2467d0a34ab96 py-3 rounded-xl font-semibold transition-all ${ef===e?"text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:e},e))}),(0,t.jsx)("input",{type:"number",placeholder:"Custom amount",value:ef,onChange:e=>eb(parseInt(e.target.value)||0),className:"jsx-c5f2467d0a34ab96 w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white text-center mb-4"}),(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>eh(!1),className:"jsx-c5f2467d0a34ab96 flex-1 py-3 rounded-xl bg-white/5 text-white/60 font-medium",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>eG(ef,eg.id,ey||void 0),disabled:ef>ex||ef<=0,style:{backgroundColor:F},className:"jsx-c5f2467d0a34ab96 flex-1 py-3 rounded-xl font-semibold text-white disabled:opacity-50",children:["Send ",ef," ðŸª™"]})]}),(0,t.jsxs)("p",{className:"jsx-c5f2467d0a34ab96 text-center text-white/30 text-xs mt-3",children:["You have ",ex," YallPoints"]})]})]}),ev&&(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{onClick:()=>eN(!1),className:"jsx-c5f2467d0a34ab96 absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,t.jsxs)("div",{className:"jsx-c5f2467d0a34ab96 relative text-center",children:[(0,t.jsx)("h3",{className:"jsx-c5f2467d0a34ab96 text-white font-bold text-xl mb-4",children:"My YallWall QR"}),ek&&(0,t.jsx)("img",{src:ek,alt:"QR Code",className:"jsx-c5f2467d0a34ab96 w-64 h-64 rounded-2xl mx-auto"}),(0,t.jsx)("p",{className:"jsx-c5f2467d0a34ab96 text-white/50 text-sm mt-4",children:"Scan to view profile"}),(0,t.jsx)("button",{onClick:()=>eN(!1),className:"jsx-c5f2467d0a34ab96 mt-6 px-6 py-2 rounded-full bg-white/10 text-white",children:"Close"})]})]})]})]})}e.s(["default",()=>W],99164)}]);